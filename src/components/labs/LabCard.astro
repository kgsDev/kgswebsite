---
// src/components/labs/LabCard.astro
// A reusable card component for displaying lab information
const { labs, directusUrl } = Astro.props;

// Guard against null/undefined labs
if (!labs) {
  console.log('Labs data: null - skipping render');
  return null;
}

const displayName = labs.name || `Lab #${labs.id || '?'}`;
const shortName = labs.short_name || labs.shortname || null;
const logo = labs.logo || null;
const slug = labs.slug || `lab-${labs.id}`;
---

<a 
  href={`/labs/${slug}/`}
  class="flex items-center p-2 rounded-lg bg-white border border-green-200 hover:bg-green-50 transition duration-200"
>
  {logo && (
    <div class="flex-shrink-0 mr-3">
      <img 
        src={`${directusUrl}assets/${logo}?height=500&quality=90&fit=cover`} 
        alt={`${displayName} logo`}
        class="w-25 h-25 object-contain"
      />
    </div>
  )}
  <div class="flex-grow">
    <span class="font-medium text-green-800 group-hover:text-green-700">
      {displayName}
      {shortName && (
        <span class="font-normal text-green-700 ml-1">
          ({shortName})
        </span>
      )}
    </span>
    {labs.description && (
      <p class="text-xs text-gray-600 mt-1 line-clamp-2">{labs.short_description}</p>
    )}
  </div>
  <div class="flex-shrink-0 ml-2 text-green-600">
    <i class="fas fa-chevron-right"></i>
  </div>
</a>