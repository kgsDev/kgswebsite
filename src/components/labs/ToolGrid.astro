---
// src/components/labs/ToolGrid.astro
const { tools } = Astro.props;
const directusUrl = import.meta.env.PUBLIC_DIRECTUS_URL;
---

<div class="software-grid grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4">
  {tools.map(tool => (
    <a 
      href={tool.url || '#'} 
      target={tool.url ? '_blank' : '_self'}
      rel={tool.url ? 'noopener noreferrer' : ''}
      class="software-item group flex flex-col items-center p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-200 border border-gray-200 hover:border-blue-300"
    >
      {tool.logo ? (
        <img 
          src={`${directusUrl}assets/${tool.logo}?width=80&height=80&fit=contain&quality=90`} 
          alt={`${tool.name} logo`}
          class="software-logo w-12 h-12 md:w-16 md:h-16 object-contain mb-2 group-hover:scale-105 transition-transform duration-200"
        />
      ) : (
        <div class="w-12 h-12 md:w-16 md:h-16 bg-gray-100 rounded-lg flex items-center justify-center mb-2">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 md:h-8 md:w-8 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
          </svg>
        </div>
      )}
      <span class="text-sm font-medium text-center text-gray-700 group-hover:text-blue-600 transition-colors duration-200">
        {tool.name}
      </span>
      {tool.description && (
        <span class="text-xs text-gray-500 text-center mt-1 line-clamp-2">
          {tool.description}
        </span>
      )}
    </a>
  ))}
</div>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>