---
// Homepage for Kentucky Geological Survey
import Header from '../components/common/Header.astro';
import Footer from '../components/common/Footer.astro';
import NewsGrid from '../components/news/NewsGrid.astro';
import { fetchRecentNews } from '../lib/api_news';

import '../styles/global.css';
import '../styles/home_reset.css';
import '../styles/home_styles.css';

// Fetch recent news for the homepage (limit to 6 items)
const { articles } = await fetchRecentNews(6, 1);
---

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kentucky Geological Survey, University of Kentucky">
    <title>Kentucky Geological Survey, University of Kentucky</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:ital,wght@0,200..900;1,200..900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Use your Astro Header component -->
    <Header activePage="home" />

    <main>
        <!-- Video Background -->
        <section class="hero">
            <div class="hero-container">
                <div class="video-container">
                    <div class="link-container">
                        <a class="hero-link inter-nav" href="/research/energy">
                            <img src="/assets/index/cropped-energy.png" alt="Energy & Minerals">
                            <span class="link-text">Energy &amp; Minerals</span>
                        </a>
                        <a class="hero-link inter-nav" href="/research/water">
                            <img src="/assets/index/cropped-water.png" alt="Water">
                            <span class="link-text">Water</span>
                        </a>
                        <a class="hero-link inter-nav" href="/research/hazards">
                            <img src="/assets/index/cropped-hazard.png" alt="Hazards">
                            <span class="link-text">Hazards</span>
                        </a>
                        <a class="hero-link inter-nav" href="https://kgs.uky.edu/kygeode/">
                            <img src="/assets/index/cropped-maps.png" alt="Maps">
                            <span class="link-text">Maps</span>
                        </a>
                        <a class="hero-link inter-nav" href="/engage/">
                            <img src="/assets/index/cropped-community.png" alt="Community">
                            <span class="link-text">Community</span>
                        </a>
                    </div>
                    <div class="video-copy-container">
                        <h2 class="hero-title inter-h2">Kentucky Geological Survey</h2>
                        <h1 class="hero-subtitle inter-h1">Understanding Earth's Resources for our Commonwealth</h1>
                    </div>
                    <video class="video" src="/assets/index/video-icon-background.mp4" loop autoplay muted></video>
                </div>
            </div>
        </section>

        <section class="section-tile">
            <div class="section-container">
                <div class="tile-heading">
                    <h2 class="inter-h2">Who we are</h2>
                    <p class="source-sans-3-p">The Kentucky Geological Survey is a state supported research center and public resource within the University of Kentucky. Our mission is to support sustainable prosperity of the Commonwealth, the vitality of its flagship university, and the welfare of its people. We do this by conducting research and providing unbiased information about geologic resources, environmental issues, and natural hazards affecting Kentucky.</p>
                </div>
                <div class="tile-container">
                    <div class="tile community">
                        <div class="tile-content">
                            <h2 class="inter-h2 tile-title">Community &amp; Education</h2>
                            <p class="source-sans-3-p tile-text">Discover comprehensive geological educational resources tailored for K-16 educators and students.</p>
                        </div>
                        <a href="https://www.uky.edu/KGS/education/" class="inter-button tile-button">Learn more</a>
                    </div>
                    <div class="tile research">
                        <div class="tile-content">
                            <h2 class="inter-h2 tile-title">Research &amp; Labs</h2>
                            <p class="source-sans-3-p tile-text">Our research and laboratories enhance knowledge and understanding of Kentucky's geological resources, hazards, and water systems to support science-based decision making for the Commonwealth.</p>
                        </div>
                        <a href="/labs/" class="inter-button tile-button">Learn more</a>
                    </div>
                    <div class="tile openings">
                        <div class="tile-content">
                            <h2 class="inter-h2 tile-title">Current Openings</h2>
                            <p class="source-sans-3-p tile-text">Check out our current job opportunities and apply today.</p>
                        </div>
                        <a href="/about/jobs/" class="inter-button tile-button">Learn more</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="midsection">
            <div class="section-container">
                <div class="section-internships">
                    <h2 class="inter-h2">Summer Internship Program</h2>
                    <p class="source-sans-3-p">Dr. Paul Edwin Potter Internship Program participants collaborate with mentors from KGS on 10-week research projects focused on KGS current research areas. Interns develop technical skills, participate in professional development opportunities, and expand their academic networks.</p> 
                    <div class="button-container">
                        <a href="/about/intern" class="inter-button">Learn More</a>
                    </div>
                    <img src="/assets/index/kgs-internship-sm.webp" alt="2023 Potter Internship Program participants">
                    <p class="source-sans-3-p-smaller">2023 Potter Internship Program participants</p>
                </div>
                <div class="section-podcast">
                    <iframe
                        title="The Big Blue Rock Pod"
                        allowtransparency="true"
                        height="625"
                        width="100%"
                        style="border: none; min-width: min(50vw, 500px);height:625px;"
                        scrolling="no"
                        data-name="pb-iframe-player"
                        src="https://www.podbean.com/player-v2/?i=d94fw-cf37a4-pbblog-playlist&share=1&download=1&fonts=Arial&skin=3267a3&font-color=auto&rtl=0&logo_link=&btn-skin=60a0c8&size=315"
                        loading="lazy"
                        allowfullscreen="">
                    </iframe>
                </div>
            </div>
        </section>

        <section class="section-tile">
            <div class="tile-container">
                <div class="tile service">
                    <div class="service-container">
                        <h2 class="inter-h2">How KGS Serves Our Kentucky Community</h2>

                        <p class="source-sans-3-p">The Kentucky Geological Survey (KGS) traces its roots back to 1838 and has been part of the University of Kentucky since 1948. Our mission is to support the sustainable prosperity of the Commonwealth, the vitality of its flagship university, and the welfare of its people.</p>

                        <p class="source-sans-3-p">We do this by conducting research and providing unbiased information about the geology and natural resources of Kentucky. We focus on issues relevant to the economic prosperity, environmental quality, and practical well-being of the Commonwealth and its people: the things that can make Kentucky a compelling place to live, work, and do business.</p>

                        <p class="source-sans-3-p">KGS provides technical support to several state agencies and organizations, and a host of local, county, and federal agencies. We also interact with stakeholders from a wide range of community, industry, environmental, and educational groups, and the KGS website provides free public access to our databases, digital map layers, and reports.</p>
                        <a href="/about/" class="inter-button">Learn more</a>
                    </div>
                    <div class="youtube-video-container">
                        <iframe
                            width="560"
                            height="315"
                            src="https://www.youtube.com/embed/yIvYDxurai4?si=ZIGOG3YK43cEIIxQ"
                            title="YouTube video player"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            referrerpolicy="strict-origin-when-cross-origin"
                            allowfullscreen>
                        </iframe>
                    </div>
                </div>
            </div>
        </section>

        <section class="section-data">
            <div class="section-container">
                <div class="data-container">
                    <h2 class="inter-h2">Gateway to Kentucky's Earth Science Data</h2>
                    <p class="source-sans-3-p">The Kentucky Geological Survey provides free public access to comprehensive databases, digital maps, and research reports through user-friendly interactive interfaces—no specialized software required.</p>
                    <br>
                    <p class="source-sans-3-p">Our Earth Analysis Research Library houses over 2,500 rock cores, 16,000 oil/gas well samples, 8,000+ limestone samples, and 5,000+ coal samples. The KGS Groundwater Data Repository contains information on 92,000+ water wells, 5,100 springs, and 58,000 water-quality analyses.</p>
                    <br>
                    <p class="source-sans-3-p">Additional databases document Kentucky's landslides, sinkholes, oil/gas wells, earthquakes, mines, and quarries—all supporting resource exploration, environmental protection, and engineering studies.</p>
                    <br/>
                    <a href="https://kgs.uky.edu/kygeode/" class="inter-button">Learn more</a>
                </div>
                <img src="/src/assets/index/kgs-coreviewing.webp" alt="KGS Core Viewing">
            </div>
        </section>

        <!-- News Section -->
        <section class="section-news">
            <div class="section-container">
                <h2 class="inter-h2">KGS News and Announcements</h2>
                <div class="news-tile-container">
                    {articles.length > 0 ? (
                        <NewsGrid articles={articles} layout="grid" />
                    ) : (
                        <!-- Fallback news tiles if no articles are available -->
                    )}
                </div>

                <!-- Add "View All News" button if using NewsGrid -->
                {articles.length > 0 && (
                    <div class="news-view-all-container">
                        <a href="/news/" class="news-view-all-button inter-button">View All News</a>
                    </div>
                )}
            </div>
        </section>
    </main>

    <!-- Use your Astro Footer component -->
    <Footer />
</body>
</html>
