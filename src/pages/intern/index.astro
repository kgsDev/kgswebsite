---
// src/pages/intern/index.astro
export const prerender = true;
import BaseLayout from '../../layouts/BaseLayout.astro';
import InternSidebar from '../../components/intern/InternSidebar.astro';
import { fetchCurrentInternDetails, fetchInternDetailsByYear } from '../../lib/api_intern';

// Get the year from params
const { year } = Astro.params;
const currentDetails = await fetchCurrentInternDetails();
const programYear = year ? parseInt(year) : currentDetails?.program_year;

// Fetch details for the specific year
const details = programYear ? await fetchInternDetailsByYear(programYear) : currentDetails;

const directusUrl = import.meta.env.PUBLIC_DIRECTUS_URL;

// Format dates for display
function formatDate(dateString) {
  return new Date(dateString).toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

const isCurrentYear = details.program_year === currentDetails?.program_year;

// Get current year for the eligibility link
const currentYear = details?.program_year || new Date().getFullYear();
---

<BaseLayout 
  title="The Paul Edwin Potter Internship Program"
  description="Paid summer research internships for undergraduate and graduate students interested in geoscience-related research at the Kentucky Geological Survey."
  activePage="intern"
>
  <div class="grid grid-cols-1 lg:grid-cols-4 gap-8" data-pagefind-meta="category:Intern Program">
    <!-- Sidebar -->
    <InternSidebar activeSection="about" />

    <!-- Main Content -->
    <div class="lg:col-span-3 max-w-4xl">
    <h1 class="text-3xl font-bold text-blue-900 mb-6">The Paul Edwin Potter Internship Program</h1>
    
    <!-- Hero Image and Description -->
    <div class="grid md:grid-cols-2 gap-8 mb-8">
      <div>
        <p class="mb-6">
          The Potter Internship was established in 2022 thanks to a generous gift from the late <a href="https://ohiodnr.gov/wps/portal/gov/odnr/discover-and-learn/safety-conservation/about-ODNR/news/051321-paul-e-potter" target="_blank" class="text-blue-600 hover:underline">Dr. Paul Edwin Potter</a>, a former professor of geology at the University of Cincinnati and the University of Indiana. In addition to his notable contributions to the fields of sedimentology and stratigraphy, Dr. Potter believed strongly in mentoring the next generation of scientists. He continued to advise students even after his retirement, and worked closely with the state surveys of Illinois, Ohio, Indiana, and Kentucky and served as a mentor to their research staff until his death in 2020. To honor and continue this legacy of developing early career geoscientists, the KGS Potter Intern Program provides mentorship and training experience to students interested in geoscience-related research. Participants collaborate with KGS scientists on 10-week, field-based research projects. Though each intern has ownership over their own project, projects will often overlap in method or application. In this way, interns will gain an understanding of how research institutions as a whole can best function as a team. <a href="intern/projects">Past project applications</a> include geologic hazards, critical minerals, hydrogeology, landscape evolution, flooding, and cutting-edge geological research.
        </p>
        
        <p class="mb-6">
          In addition to learning technical skills associated with their project, KGS Potter interns participate in various professional development opportunities and are provided the tools to expand their academic networks. The program concludes with the <a href="/intern/${currentYear}#showcase">KGS Paul Edwin Potter Internship showcase</a>, where each intern will share their summer research with the KGS-UK community. The following pages include information and answers to FAQs regarding the application process, summer experience, and outcomes of the program for interns.
        </p>
      </div>
      
      <div class="text-center">
        <figure>
          <img 
            src="/assets/intern/Potter_Nuttall_Crop.png" 
            alt="Paul Potter in the field. Photo by Brandon Nuttall" 
            class="w-full h-auto rounded-lg shadow-lg"
          />
          <figcaption class="text-sm text-gray-600 mt-2">
            Paul Potter in the field. Photo by Brandon Nuttall (KGS).
          </figcaption>
        </figure>
      </div>
    </div>
   
    <!-- Program Benefits - Now Clickable Link Blocks -->
    <div class="grid md:grid-cols-3 gap-6 mb-8">
      <a 
        href={`/intern/${currentYear}`}
        class="bg-blue-50 rounded-lg p-6 hover:bg-blue-100 hover:shadow-lg transition-all duration-200 group"
      >
        <div class="flex flex-col items-center text-center">
          <i class="fas fa-file-alt text-blue-600 mb-4 group-hover:scale-110 transition-transform duration-200" style="font-size: 3rem;"></i>
          <h3 class="text-lg font-semibold text-blue-800 group-hover:text-blue-900">Eligibility and Application</h3>
        </div>
      </a>
      
      <a 
        href={`/intern/${currentYear}#what-to-expect`}
        class="bg-green-50 rounded-lg p-6 hover:bg-green-100 hover:shadow-lg transition-all duration-200 group"
      >
        <div class="flex flex-col items-center text-center">
          <i class="fas fa-calendar-check text-green-600 mb-4 group-hover:scale-110 transition-transform duration-200" style="font-size: 3rem;"></i>
          <h3 class="text-lg font-semibold text-green-800 group-hover:text-green-900">What to Expect</h3>
        </div>
      </a>
      
      <a 
        href="/intern/why"
        class="bg-yellow-50 rounded-lg p-6 hover:bg-yellow-100 hover:shadow-lg transition-all duration-200 group"
      >
        <div class="flex flex-col items-center text-center">
          <i class="fas fa-star text-yellow-600 mb-4 group-hover:scale-110 transition-transform duration-200" style="font-size: 3rem;"></i>
          <h3 class="text-lg font-semibold text-yellow-800 group-hover:text-yellow-900">Why Participate?</h3>
        </div>
      </a>
    </div>
    
   <div style="background: linear-gradient(to right, var(--wildcatBlue), var(--midnightBlue));" class="text-white rounded-lg p-8 text-center">
      <h2 class="text-2xl font-bold mb-4" style="color: white !important;">Questions?</h2>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <p class="text-lg" style="color: white !important;">Contact us:</p>
        <a 
          href="mailto:kgspotterinternship@uky.edu"
          class="baselink text-lg hover:underline" style="color: white !important;"
        >
          kgspotterinternship@uky.edu
        </a>
      </div>
    </div>
    </div>
  </div>
</BaseLayout>